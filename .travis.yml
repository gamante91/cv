language: generic
services:
  - docker
before_install:
  - docker pull dxjoke/tectonic-docker
  - pwd
  - ls -a
script:
  - docker run --mount src=$TRAVIS_BUILD_DIR/src,target=/usr/src/tex,type=bind dxjoke/tectonic-docker /bin/sh -c "tectonic GiacomoAmante.tex"
  - ls -a
before_deploy:
  - pwd
  - ls -a
deploy:
  provider: pages
  cleanup: false
  github-token: $github-token
  on:
    branch: master
  target_branch: gh-pages
  local_dir: build
after_deploy:
  - pwd
  - ls